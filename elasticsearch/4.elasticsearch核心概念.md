# 第四章 elasticsearch核心概念

### 4.1 概述

Elasticsearch是面向文档型数据库，一条数据在这里就是一个文档，用JSON作为文档序列化的格式，比如下面这条用户数据：

{
&#x20;   "name" :     "John",
&#x20;   "sex" :      "Male",
&#x20;   "age" :      25,
&#x20;   "birthDate": "1990/05/01",
&#x20;   "about" :    "I love to go rock climbing",
&#x20;   "interests": \[ "sports", "music" ]
}

用Mysql这样的数据库存储就会容易想到建立一张User表，有各个字段等，在ElasticSearch里这就是一个文档，当然这个文档会属于一个User的类型，各种各样的类型存在于一个索引当中。这里有一份简易的将Elasticsearch和关系型数据术语对照表:

![](image/image_27_Si7zraCugr.png)

image-20211006113840156

### 4.2 索引(Index)

一个索引就是一个拥有几分相似特征的文档的集合。比如说，你可以有一个客户数据的索引，另一个产品目录的索引，还有一个订单数据的索引。一个索引由一个名字来标识（必须全部是小写字母），并且当我们要对这个索引中的文档进行索引、搜索、更新和删除的时候，都要使用到这个名字。在一个集群中，可以定义任意多的索引。

能搜索的数据必须索引，这样的好处是可以提高查询速度，比如：新华字典前面的目录就是索引的意思，目录可以提高查询速度。

***Elasticsearch索引的精髓：一切设计都是为了提高搜索的性能。***

### 4.3 类型(Type)

在一个索引中，你可以定义一种或多种类型。

一个类型是你的索引的一个逻辑上的分类/分区，其语义完全由你来定。通常，会为具有一组共同字段的文档定义一个类型。不同的版本，类型发生了不同的变化

| 版本&#xA;  | Type&#xA;                               |
| -------- | --------------------------------------- |
| 5.x&#xA; | 支持多种type&#xA;                           |
| 6.x&#xA; | 只能有一种type&#xA;                          |
| **7.x**  | \*\*默认不再支持自定义索引类型（默认类型为：\_doc）\*\*&#xA; |

### 4.4 文档(Document)

一个文档是一个可被索引的基础信息单元，也就是一条数据

比如：你可以拥有某一个客户的文档，某一个产品的一个文档，当然，也可以拥有某个订单的一个文档。文档以**JSON（Javascript Object Notation）格式**来表示，而JSON是一个到处存在的互联网数据交互格式。

在一个index/type里面，你可以存储任意多的文档。

### 4.5 字段(Field)

相当于是数据表的字段，对文档数据根据不同属性进行的分类标识。

### 4.6 映射(Mapping)

mapping是处理数据的方式和规则方面做一些限制，如：某个字段的数据类型、默认值、分析器、是否被索引等等。这些都是映射里面可以设置的，其它就是处理ES里面数据的一些使用规则设置也叫做映射，按着最优规则处理数据对性能提高很大，因此才需要建立映射，并且需要思考如何建立映射才能对性能更好。

## 5. elasticsearch基本操作

参考文档: <https://www.elastic.co/guide/en/elasticsearch/reference/7.8/index.html>

![](image/image_28_i00jB4O4v2.png)

